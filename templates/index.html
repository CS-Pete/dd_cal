<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day of the Week Calculator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
   <!-- Header -->
    <header>
        <nav>
            <a href="{{ url_for('index') }}">HOME</a>
            <a href="">BLOG</a>
        </nav>
    </header>
    <!-- Carousel -->
    <div class="carousel">
        <!-- Carousel items -->
        <div class="list">
            <div class="item">
                <img src="{{ url_for('static', filename='images/img1.jpg') }}" alt="Advanced computing dashboard">
                <div class="content">
                    <div class="author">PILIP</div>
                    <div class="title">PERPETUAL CALENDAR</div>
                    <div class="topic">Doomsday Algorithm</div>
                    <div class="des">Sounds ominous but the Doomsday algorithm is basically a time-travel cheat code for calendars. Created by John Conway, the algorithm provides a perpetual calendar by leveraging the 400-year cycle of the Gregorian calendar. It identifies a "Doomsday" — a day of the week that recurs on specific dates each month, making it easy to determine the weekday for any given date. For example, the last day of February and July 4th always fall on the same weekday — ALWAYS. The algorithm is so straightforward you can do it in your head. Curious to test it out? Try the Doomsday algorithm below!</div>
                    <form id="date-form" method="POST">
                        <!-- <label for="month">Month:</label> -->
                        <select id="month" name="month" required>
                            <option value="">Select Month</option>
                            <option value="1">January</option>
                            <option value="2">February</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">June</option>
                            <option value="7">July</option>
                            <option value="8">August</option>
                            <option value="9">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
            
                         <!-- <label for="day">Day:</label> -->
                        <select id="day" name="day" required>
                            <option value="">Select Day</option>
                            {% for d in range(1, 32) %}
                                <option value="{{ d }}">{{ d }}</option>
                            {% endfor %}
                        </select>
            
                         <!-- <label for="year">Year:</label> -->
                        <input type="number" id="year" name="year" min="1600"  required placeholder="Enter Year">
            
                        <button type="submit" id="compute-button" disabled>Compute</button>
                    </form>
            
                    <div id="result" style="display: none;">
                        <p id="result-text"></p>
                        <p id="more-about"></p>
                        <div id="sequential-relationship">
                            <p>Century anchor: <span id="century-anchor"></span></p>
                            <p>Century anchor day: <span id="century-anchor-day"></span></p>
                            <p>Doomsday for <span id="result-month"></span> : <span id="doomsday-month"></span></p>
                            <p>Calculated day: <span id="calculated-day"></span></p>
                        </div>
                    </div>
                    <div class="buttons">
                        <button>SEE MORE</button>
                        <button>SHARE</button>
                    </div>
                </div>
            </div>

            <div class="item">
                <img src="{{ url_for('static', filename='images/loading1.jpg') }}" alt="Robotic Loading Image">
                <div class="content">
                    <div class="author">PILIP</div>
                    <div class="title">ANNUAL COUNTDOWN</div>
                    <div class="topic">(Coming Soon)</div>
                    <div class="des">
                        Lorem ipsum dolor, sit amet consectetur adipisicing elit. Ut sequi, rem magnam nesciunt minima placeat, itaque eum neque officiis unde, eaque optio ratione aliquid assumenda facere ab et quasi ducimus aut doloribus non numquam. Explicabo, laboriosam nisi reprehenderit tempora at laborum natus unde. Ut, exercitationem eum aperiam illo illum laudantium?
                    </div>
                    <div class="buttons">
                        <button>SEE MORE</button>
                        <button>SUBSCRIBE</button>
                    </div>
                </div>
            </div> 
        </div>
    </div>

    <!-- Thumbnail -->
    <div class="thumbnail">
        <div class="item">
            <img src="{{ url_for('static', filename='images/img1.jpg') }}" alt="Thumbnail Image">   
            <div class="content">
                <div class="title">Doomsday Calculator</div>
                <div class="des">Calculate the day of the week for any date</div>
        </div>

        <div class="item">
            <img src="{{ url_for('static', filename='images/loading1.jpg') }}" alt="Thumbnail Image">   
            <div class="content">
                <div class="title">Year in Progress</div>
                <div class="des">Coming Soon</div>
            </div>
        </div>
    </div>

<!-- Arrows -->
    <div class="arrows">
        <button id="prev"><</button>
        <button id="next">></button>
    </div>  


    <main>
        <h1>Day of the Week Calculator</h1>
        <form id="date-form" method="POST">
            <label for="month">Month:</label>
            <select id="month" name="month" required>
                <option value="">Select Month</option>
                <option value="1">January</option>
                <option value="2">February</option>
                <option value="3">March</option>
                <option value="4">April</option>
                <option value="5">May</option>
                <option value="6">June</option>
                <option value="7">July</option>
                <option value="8">August</option>
                <option value="9">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
            </select>

            <label for="day">Day:</label>
            <select id="day" name="day" required>
                <option value="">Select Day</option>
                {% for d in range(1, 32) %}
                    <option value="{{ d }}">{{ d }}</option>
                {% endfor %}
            </select>

            <label for="year">Year:</label>
            <input type="number" id="year" name="year" min="1600"  required placeholder="Select year">

            <button type="submit" id="compute-button" disabled>Compute</button>
        </form>

        <div id="result" style="display: none;">
            <p id="result-text"></p>
            <p id="more-about"></p>
            <div id="sequential-relationship">
                <p>Century anchor? <span id="century-anchor"></span></p>
                <p>Century anchor day? <span id="century-anchor-day"></span></p>
                <p>Doomsday for <span id="result-month"></span> = <span id="doomsday-month"></span></p>
                <p>Calculated day: <span id="calculated-day"></span></p>
            </div>
        </div>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('date-form');
            const computeButton = document.getElementById('compute-button');
            const monthSelect = document.getElementById('month');
            const daySelect = document.getElementById('day');
            const yearInput = document.getElementById('year');

            form.addEventListener('change', function () {
                if (monthSelect.value && daySelect.value && yearInput.value) {
                    computeButton.disabled = false;
                } else {
                    computeButton.disabled = true;
                }
            });

            form.addEventListener('submit', function (event) {
                event.preventDefault();
                const month = parseInt(monthSelect.value);
                const day = parseInt(daySelect.value);
                const year = parseInt(yearInput.value);

                // Error handling for invalid dates
                if ((month === 2 && day > 29) || 
                    ((month === 4 || month === 6 || month === 9 || month === 11) && day > 30) || 
                    (month === 2 && day === 29 && !((year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0)))) {
                    alert('Invalid date selected. Please choose a valid date.');
                    return;
                }

                fetch('/compute', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ month, day, year })
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result-text').innerText = data.result_text;
                    document.getElementById('more-about').innerHTML = `More about <a href="${data.more_about_link}">${data.more_about_text}</a>`;
                    document.getElementById('century-anchor').innerText = data.century_anchor;
                    document.getElementById('century-anchor-day').innerText = data.century_anchor_day;
                    document.getElementById('result-month').innerText = data.result_month;
                    document.getElementById('doomsday-month').innerText = data.doomsday_month;
                    document.getElementById('calculated-day').innerText = data.calculated_day;
                    document.getElementById('result').style.display = 'block';
                });
            });
        });
    </script>
</body>
</html>
